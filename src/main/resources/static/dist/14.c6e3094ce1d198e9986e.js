(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"/9PK":function(t,e,a){"use strict";a.r(e),a.d(e,"UserRolesModule",function(){return H});var i=a("ofXK"),o=a("tyNb"),n=a("M9IT"),c=a("Dh3D"),s=a("+0xr"),r=a("Sy1n"),l=a("fXoL"),b=a("7KSe"),d=a("7zfz"),u=a("rqBn"),m=a("Wp6s"),p=a("kmnG"),g=a("qFsG"),h=a("Nf9I"),f=a("d3UM"),U=a("3Pt+"),y=a("FKr1");function S(t,e){1&t&&(l.Vb(0,"th",14),l.Jc(1," Usuario "),l.Ub())}function w(t,e){if(1&t&&(l.Vb(0,"td",15),l.Jc(1),l.Ub()),2&t){const t=e.$implicit;l.Db(1),l.Lc(" ",t.UserName," ")}}function C(t,e){1&t&&(l.Vb(0,"th",14),l.Jc(1," Rol "),l.Ub())}function v(t,e){if(1&t&&(l.Vb(0,"mat-option",19),l.Jc(1),l.Ub()),2&t){const t=e.$implicit;l.mc("value",t.Name),l.Db(1),l.Lc("",t.Name," ")}}function L(t,e){if(1&t){const t=l.Wb();l.Vb(0,"td",15),l.Vb(1,"mat-form-field",16),l.Vb(2,"mat-label"),l.Jc(3,"Selecciona una opcion"),l.Ub(),l.Vb(4,"mat-select",17),l.cc("ngModelChange",function(t){return e.$implicit.Role=t})("selectionChange",function(a){l.yc(t);const i=e.$implicit;return l.gc().changeRole(a,i.Id)}),l.Hc(5,v,2,2,"mat-option",18),l.Ub(),l.Ub(),l.Ub()}if(2&t){const t=e.$implicit,a=l.gc();l.Db(4),l.mc("ngModel",t.Role),l.Db(1),l.mc("ngForOf",a.rolesList)}}function D(t,e){1&t&&l.Qb(0,"tr",20)}function V(t,e){1&t&&l.Qb(0,"tr",21)}const M=function(){return[10,25,100]},R=[{path:"",component:(()=>{class t{constructor(t,e){this._legalizacionService=t,this._confirmationService=e,this.usersList=[],this.total=0,this.rolesList=[],this.displayedColumns=["usuario","rol"],this.dataSource=new s.k}ngOnInit(){this.getUsers(),this.getRoles()}getUsers(){r.a.displayLoading=!0,this._legalizacionService.getUsers().subscribe(t=>{this.usersList=t.data,this.total=this.usersList.length,this.dataSource=new s.k(this.usersList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,r.a.displayLoading=!1},t=>{console.log(t),r.a.displayLoading=!1})}getRoles(){r.a.displayLoading=!0,this._legalizacionService.getRoles().subscribe(t=>{this.rolesList=t.data,r.a.displayLoading=!1},t=>{console.log(t),r.a.displayLoading=!1})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}changeRole(t,e){let a=this.getRoleByName(t.value);null!=a&&null!=a&&this._confirmationService.confirm({message:"Estas seguro que deseas actualizar este campo?",accept:()=>{r.a.displayLoading=!0,this._legalizacionService.addOrUpdateRole(e,a.Id,2).subscribe(t=>{r.a.displayLoading=!1},t=>{console.log(t),r.a.displayLoading=!1})},reject:()=>{this._confirmationService.close()}})}getRoleByName(t){for(let e=0;e<this.rolesList.length;e++){const a=this.rolesList[e];if(a.Name==t)return a}return null}}return t.\u0275fac=function(e){return new(e||t)(l.Pb(b.a),l.Pb(d.b))},t.\u0275cmp=l.Jb({type:t,selectors:[["app-user-roles"]],viewQuery:function(t,e){if(1&t&&(l.Oc(n.a,1),l.Oc(c.a,1)),2&t){let t;l.vc(t=l.dc())&&(e.paginator=t.first),l.vc(t=l.dc())&&(e.sort=t.first)}},decls:25,vars:6,consts:[[1,"content-panel"],["appearance","standard"],["matInput","","placeholder","Escribe una palabra",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","usuario"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rol"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of users",3,"pageSizeOptions"],["header","Confirmacion","icon","pi pi-exclamation-triangle"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["appearance","fill"],["name","rol",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(l.Vb(0,"app-layout"),l.Vb(1,"section",0),l.Vb(2,"mat-card"),l.Vb(3,"h1"),l.Jc(4,"Usuarios"),l.Ub(),l.Vb(5,"h5"),l.Jc(6),l.Ub(),l.Vb(7,"div"),l.Vb(8,"mat-form-field",1),l.Vb(9,"mat-label"),l.Jc(10,"Filtro"),l.Ub(),l.Vb(11,"input",2,3),l.cc("keyup",function(t){return e.applyFilter(t)}),l.Ub(),l.Ub(),l.Vb(13,"div",4),l.Vb(14,"table",5),l.Tb(15,6),l.Hc(16,S,2,0,"th",7),l.Hc(17,w,2,1,"td",8),l.Sb(),l.Tb(18,9),l.Hc(19,C,2,0,"th",7),l.Hc(20,L,6,2,"td",8),l.Sb(),l.Hc(21,D,1,0,"tr",10),l.Hc(22,V,1,0,"tr",11),l.Ub(),l.Qb(23,"mat-paginator",12),l.Ub(),l.Ub(),l.Ub(),l.Qb(24,"p-confirmDialog",13),l.Ub(),l.Ub()),2&t&&(l.Db(6),l.Lc("Total: ",e.total,""),l.Db(8),l.mc("dataSource",e.dataSource),l.Db(7),l.mc("matHeaderRowDef",e.displayedColumns),l.Db(1),l.mc("matRowDefColumns",e.displayedColumns),l.Db(1),l.mc("pageSizeOptions",l.oc(5,M)))},directives:[u.a,m.a,p.c,p.g,g.b,s.j,s.c,s.e,s.b,s.g,s.i,n.a,h.a,s.d,s.a,f.a,U.o,U.r,i.n,y.m,s.f,s.h],styles:[".content-panel[_ngcontent-%COMP%]{padding:2em;height:100%}.content-panel[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:auto;margin-bottom:6em}table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({imports:[[o.e.forChild(R)],o.e]}),t})();var _=a("bTqV"),N=a("NFeN"),P=a("MutI"),z=a("PCNd"),J=a("tk/3");let H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({providers:[d.b,b.a],imports:[[i.c,O,z.a,m.b,P.d,N.b,_.b,U.j,U.t,s.l,g.c,n.b,f.b,h.b,J.c]]}),t})()}}]);