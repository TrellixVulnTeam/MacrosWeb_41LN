{"version":3,"sources":["webpack:///src/app/pages/project-settings/project-settings.component.html","webpack:///src/app/pages/project-settings/project-settings.component.ts","webpack:///src/app/pages/project-settings/project-settings-routing.module.ts","webpack:///src/app/pages/project-settings/project-settings.module.ts"],"names":["ProjectSettingsComponent","_legalizacionService","projectList","originalProjectList","total","totalActive","projectActive","displayLoading","getProjectSettings","subscribe","response","console","log","data","length","index","element","STATUS","push","selectedOptions","err","evt","filter","item","String","PRY_Nombre","toLowerCase","includes","updateProject","PRY_ID","toPromise","onFilter","routes","path","component","ProjectSettingsRoutingModule","forChild","ProjectSettingsModule"],"mappings":"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","file":"pages-project-settings-project-settings-module-es5.js","sourcesContent":["<app-layout>\n    <section class=\"content-panel\">\n        <mat-form-field appearance=\"standard\" class=\"input-filter\">\n            <mat-label>Filtro</mat-label>\n            <input matInput [(ngModel)]=\"searchText\" placeholder=\"Escribe una palabra\"\n                (ngModelChange)=\"onFilter($event)\" #input>\n        </mat-form-field>\n        <mat-card>\n            <h1>Proyectos</h1>\n            <h5>Total: {{total}} Activos: {{totalActive}}</h5>\n            <div>\n                <mat-selection-list #shoes [(ngModel)]=\"selectedOptions\">\n                    <mat-list-option *ngFor=\"let project of projectList\" checkboxPosition=\"before\" [value]=\"project\"\n                        (click)=\"onNgModelChange(project)\">\n                        {{project.PRY_Nombre}}\n                    </mat-list-option>\n                </mat-selection-list>\n            </div>\n        </mat-card>\n        <!-- <div class=\"save-content\">\n            <button mat-fab color=\"primary\" aria-label=\"Example icon button with a delete icon\">\n                <mat-icon>save</mat-icon>\n            </button>\n        </div> -->\n    </section>\n\n</app-layout>","import { Component, OnInit } from '@angular/core';\nimport { AppComponent } from 'src/app/app.component';\nimport { LegalizacionService } from 'src/app/services/legalizacion.service';\n\n@Component({\n  selector: 'app-project-settings',\n  templateUrl: './project-settings.component.html',\n  styleUrls: ['./project-settings.component.scss']\n})\nexport class ProjectSettingsComponent implements OnInit {\n\n  selectedProject: any;\n  projectList: any = [];\n  originalProjectList: any = [];\n  total: number = 0;\n  totalActive: number = 0;\n\n  selectedOptions: any;\n\n  projectActive = [];\n\n  searchText: any;\n\n  constructor(\n    private _legalizacionService: LegalizacionService\n  ) { }\n\n  ngOnInit(): void {\n    AppComponent.displayLoading = true;\n    this._legalizacionService.getProjectSettings()\n      .subscribe(\n        (response: any) => {\n          console.log(response);\n          this.projectList = response.data;\n          this.originalProjectList = response.data;\n\n          this.total = this.projectList.length;\n          for (let index = 0; index < this.projectList.length; index++) {\n            const element: any = this.projectList[index];\n            if (element.STATUS) {\n              this.projectActive.push(element);\n            }\n          }\n          this.totalActive = this.projectActive.length;\n\n\n          this.selectedOptions = this.projectActive;\n          AppComponent.displayLoading = false;\n        }, err => {\n          console.log(err);\n          AppComponent.displayLoading = false;\n        }\n      )\n  }\n\n  onFilter(evt) {\n    this.projectActive = [];\n    console.log('evt', evt);\n    this.projectList = this.originalProjectList.filter(item => String(item.PRY_Nombre).toLowerCase().includes(String(evt).toLowerCase()));\n    for (let index = 0; index < this.projectList.length; index++) {\n      const element: any = this.projectList[index];\n      if (element.STATUS) {\n        this.projectActive.push(element);\n      }\n    }\n    console.log('this.projectActive', this.projectActive);\n    this.selectedOptions = this.projectActive;\n\n\n  }\n\n  async onNgModelChange(evt) {\n    // console.log('onNgModelChange', evt);\n\n    AppComponent.displayLoading = true;\n    evt.STATUS = !evt.STATUS;\n    console.log('onNgModelChange2', evt);\n    await this._legalizacionService.updateProject(evt.PRY_ID, evt.PRY_Nombre, evt.STATUS ? 1 : 2).toPromise();\n    AppComponent.displayLoading = false;\n\n    // console.log(this.projectActive.length + ' - ' + evt.length);\n    // if (this.projectActive.length < evt.length) {\n    //   let difference = evt.filter(x => !this.projectActive.includes(x));\n    //   difference = difference[0];\n    //   console.log(difference);\n    //   this.projectActive.push(difference);\n\n    //   await this._legalizacionService.updateProject(difference.PRY_ID, difference.PRY_Nombre, 1).toPromise();\n    // } else if (this.projectActive.length > evt.length) {\n    //   let difference: any = this.projectActive.filter(x => !evt.includes(x));\n    //   console.log(difference);\n\n    //   this.projectActive = this.projectActive.filter(item => !difference.includes(item))\n    //   difference = difference[0];\n    //   await this._legalizacionService.updateProject(difference.PRY_ID, difference.PRY_Nombre, 2).toPromise();\n    // }\n    // console.log(this.projectActive);\n\n    // AppComponent.displayLoading = false;\n\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ProjectSettingsComponent } from './project-settings.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProjectSettingsComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProjectSettingsRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { ProjectSettingsRoutingModule } from './project-settings-routing.module';\nimport { ProjectSettingsComponent } from './project-settings.component';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatListModule } from '@angular/material/list';\nimport {  FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { LegalizacionService } from 'src/app/services/legalizacion.service';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatInputModule } from '@angular/material/input';\nimport { PipeModule } from 'src/app/pipes/pipes.module';\nimport { HttpClientModule } from '@angular/common/http';\n\n\n@NgModule({\n  declarations: [\n    ProjectSettingsComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatInputModule,\n    ProjectSettingsRoutingModule,\n    SharedModule,\n    MatCardModule,\n    MatListModule,\n    MatIconModule,\n    MatButtonModule,\n    PipeModule,\n    HttpClientModule\n  ],\n  providers:[\n    LegalizacionService\n  ]\n})\nexport class ProjectSettingsModule { }\n"]}